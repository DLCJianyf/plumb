!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e){e&&e.__esModule}(n(1));var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"min",value:function(){var e=Array.prototype.slice.call(arguments);return 1===e.length?e[0]:e.reduce(function(e,t){return e<=t?e:t})}},{key:"max",value:function(){var e=Array.prototype.slice.call(arguments);return 1===e.length?e[0]:e.reduce(function(e,t){return e>=t?e:t})}},{key:"distance",value:function(e,t){return Math.abs(e-t)}},{key:"distanceLine",value:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}},{key:"getBoundByCircle",value:function(e,t){return{minX:e.left-t,minY:e.top-t,maxX:e.left+t,maxY:e.top+t}}},{key:"getBoundByRect",value:function(t,n){return{minX:e.min(t.x,n.x),minY:e.min(t.y,n.y),maxX:e.max(t.x,n.x),maxY:e.max(t.y,n.y)}}},{key:"isBoundIntersect",value:function(t,n){var r=e.min(t.minX,n.minX),i=e.min(t.minY,n.minY),u=e.max(t.maxX,n.maxY),o=e.max(t.maxY,n.maxY);return!(r>u||i>o)}},{key:"isCircleIntersect",value:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<=2*e.r}},{key:"isInRect",value:function(e,t){return e.x>t.x&&e.x<t.x+t.w&&e.y>t.y&&e.y<t.y+t.h}},{key:"isInCircle",value:function(t,n){return e.distanceLine(t,{x:n.x,y:n.y})<=n.w}},{key:"setAttribute",value:function(e,t){try{for(var n in t)e.setAttribute(n,t[n])}catch(e){}}},{key:"setStyle",value:function(e,t){for(var n in t)e.style[n]=t[n]}},{key:"getElementRectInfo",value:function(e){var t=["offsetLeft","offsetTop","offsetWidth","offsetHeight"].map(function(t){return e[t]||0});return{x:t[0],y:t[1],w:t[2],h:t[3]}}},{key:"getDashStyle",value:function(e,t){switch(e){case"SOLID":return[];case"DOT":return[1,4*t];case"DASH":return[4*t,4*t];case"DASHDOT":return[4*t,4*t,1,4*t];case"LONGDASH":return[8*t,4*t];case"LONGDASHDOT":return[8*t,4*t,1,4*t];default:return[]}}},{key:"getPathCMD",value:function(e){return"BEZIER"===e?"C":"L"}},{key:"guid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},{key:"findItemByUUID",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(n=(u=o.next()).done);n=!0){var a=u.value;if(a.uuid===t)return a}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return null}},{key:"findSourceByAchor",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(n=(u=o.next()).done);n=!0){var a=u.value,l=!0,s=!1,f=void 0;try{for(var c,y=a.endPoints[Symbol.iterator]();!(l=(c=y.next()).done);l=!0){if(c.value.uuid===t.uuid)return a}}catch(e){s=!0,f=e}finally{try{!l&&y.return&&y.return()}finally{if(s)throw f}}}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return null}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={ns:"http://www.w3.org/2000/svg",version:"1.1",createElement:function(e,t,n,r){return this.createElementNS(null,e,t,n,r)},createElementNS:function(e,t,n,r,i){var u=null===e?document.createElement(t):document.createElementNS(e,t),o=void 0;for(o in n=n||{})u.style[o]=n[o];for(o in r&&(u.className=r),i=i||{})u.setAttribute(o,""+i[o]);return u},getAttribute:function(e,t){return null!=e.getAttribute?e.getAttribute(t):null},setAttribute:function(e,t,n){null!=e.setAttribute&&e.setAttribute(t,n)},setAttributes:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])},getStyle:function(e,t){return void 0!==window.getComputedStyle?getComputedStyle(e,null).getPropertyValue(t):e.currentStyle[t]},setStyle:function(e,t){for(var n in t=t||{})e.style[n]=t[n]},setPosition:function(e,t){e.style.left=t.left+"px",e.style.top=t.top+"px"},appendToRoot:function(e){r.appendToNode(e,null)},appendToNode:function(e,t){t?t.appendChild(e):document.body.appendChild(e)},insertBefore:function(e,t){t.parentNode.insertBefore(e,t)},insertAfter:function(e,t){var n=t.parentNode;n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSilbing)},delete:function(e,t){(t=t||e.parentNode).removeChild(e)},find:function(e,t,n,r){return n=n||document,"tag"===e?r?n.getElementsByTagName(t):n.getElementsByTagName(t)[0]:"class"===e?n.getElementsByClassName(t)[0]:n.getElementById(t)},cursor:function(e){document.body.style.cursor=e?"pointer":"default"},getSize:function(e){return[e.offsetWidth,e.offsetHeight]},getWidth:function(e){return e.offsetWidth},getHeight:function(e){return e.offsetHeight},sizeElement:function(e,t,n,r,i){e&&(e.style.height=i+"px",e.style.width=r+"px",e.style.left=t+"px",e.style.top=n+"px")},stopEvent:function(e,t){e.stopPropagation?e.stopPropagation():e.returnValue=!1,!t&&e.preventDefault&&e.preventDefault()}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handlers={}}return r(e,[{key:"bind",value:function(e,t,n,r,i){var u=this;return u.handlers[t]=u.handlers[t]||[],window.addEventListener?function(e,t,n,r,i){function o(e){n(e,r)}u.handlers[t].push(o),e.addEventListener(t,o,!!i)}(e,t,n,r,i):window.attachEvent?function(e,t,n,r){function i(e){n(e,r)}u.handlers[t].push(i),e.attachEvent("on"+t,i)}(e,t,n,r):function(e,t,n,r){e[on+"type"]=n}(e,0,n)}},{key:"unbind",value:function(e,t){var n=this;return window.addEventListener?function(e,t){if(n.handlers[t]){for(var r=0,i=n.handlers[t].length;r<i;r++)e.removeEventListener(t,n.handlers[t]);delete n.handlers[t]}}(e,t):window.attachEvent?function(e,t){if(n.handlers[t]){for(var r=0,i=n.handlers[t].length;r<i;r++)e.removeEventListener("on"+t,n.handlers[t]);delete n.handlers[t]}}(e,t):function(e,t){e[on+"type"]=null}(e)}},{key:"on",value:function(e,t,n){t instanceof Function&&(this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push({fn:t,ctx:n||null}))}},{key:"trigger",value:function(e,t){this.handlers[e]&&(t="[Object, Array]"===Object.prototype.toString(t)?t:[t],this.handlers[e].forEach(function(e){e.fn.apply(e.ctx,t)}))}},{key:"off",value:function(e,t){var n=this;if(n.handlers[e]&&n.handlers[e].length)if(t){for(var r=[],i=0;i<n.handlers[e].length;i++)n.handlers[e][i].fn!==t&&r.push(n.handlers[e][i]);n.handlers[e]=r}else n.handlers[e]=[]}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(o(n(4)),o(n(0))),u=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"updatePosition",value:function(e,t,n){u.default.setPosition(e,{left:t,top:n})}},{key:"createDiv",value:function(e,t,n){return n=Object.assign({},n,{position:"absolute",zIndex:1}),u.default.createElement("div",n,t,{id:e})}},{key:"createSVG",value:function(e,t,n){return n=Object.assign({},n,{position:"absolute"}),u.default.createElementNS(u.default.ns,"svg",n,null,{version:"1.1",position:"absolute",width:e,height:t})}},{key:"createCircle",value:function(e,t,n){return u.default.createElementNS(u.default.ns,"circle",{},null,{id:i.default.guid(),cx:e,cy:t,r:n,version:"1.1",fill:"gray",stroke:"none"})}},{key:"createArrow",value:function(e,t,n){var r=2*n,i=2*n;return u.default.createElementNS(u.default.ns,"path",{},null,{d:"M0,0 L"+r+","+n+" L0,"+i+" L"+n+","+n+" L0,0",fill:"gray",stroke:"white"})}},{key:"createPath",value:function(e){return u.default.createElementNS(u.default.ns,"path",{},null,{fill:"none",stroke:"gray","stroke-width":e||2,"pointer-events":"auto"})}},{key:"updatePath",value:function(e,t,n,r){if(t.length){for(var o=t[0],a="M"+o[0]+","+o[1],l=1;l<t.length;l++){var s=t[l];a+=" ",1===l&&(a+=i.default.getPathCMD(n)),a+=s[0]+","+s[1]}var f=i.default.getDashStyle(r,plumb.config.strokeWidth).toString();u.default.setAttributes(e,{d:a,"stroke-dasharray":f})}}},{key:"assembleEndPoint",value:function(t){var n=t.getRect(),r=e.createDiv(t.uuid,"endpoint",{left:n.x+"px",top:n.y+"px",width:n.w+"px",height:n.h+"px"}),i=e.createSVG(n.w,n.h,{left:"0px",top:"0px",opacity:.8}),o=e.createCircle(n.w/2,n.w/2,n.w/2);return u.default.appendToNode(o,i),u.default.appendToNode(i,r),r}},{key:"assembleAnchor",value:function(t){var n=t.getRect(),r=e.createDiv(t.uuid,"anchor",{left:n.x+"px",top:n.y+"px",width:n.w+"px",height:n.h+"px"}),i=e.createSVG(n.w,n.h,{left:"0px",top:"0px",opacity:.8}),o=e.createCircle(n.w/2,n.h/2,n.w/2);return u.default.appendToNode(o,i),u.default.appendToNode(i,r),r}},{key:"deleteAnchor",value:function(e){var t=u.default.find("class","jtk-demo-canvas");u.default.delete(e.element,t)}},{key:"assembleConnector",value:function(t,n,r,i,o){var a=r.minX+i/2+"px",l=r.minY+i/2+"px",s=u.default.createElement("div",{position:"absolute",left:a,top:l,width:t+"px",height:n+"px","pointer-events":"none",overflow:"visible"}),f=e.createSVG("100%","100%",{left:0,top:0,"pointer-events":"none",overflow:"visible","z-index":10}),c=e.createPath(o),y=u.default.createElement("div",{display:"none"},"text-linker");return u.default.appendToNode(c,f),u.default.appendToNode(f,s),u.default.appendToNode(y,s),s}},{key:"updateConnector",value:function(t,n,r,i,o,a,l,s){var f=i.minX+o/2,c=i.minY+o/2;u.default.sizeElement(t.element,f,c,n+1,r+1);var y=u.default.find("tag","path",t.element);e.updatePath(y,a,l,s)}},{key:"deleteConnector",value:function(e){if(e.element){var t=u.default.find("class","jtk-demo-canvas");u.default.delete(e.element,t)}}},{key:"assembleMarker",value:function(t,n,r){var i=t.w,o=i/2,a=o,l=o,s=i,f=i,c=u.default.createElementNS(u.default.ns,"defs"),y=u.default.createElementNS(u.default.ns,"marker",{},null,{id:r,markerUnits:"userSpaceOnUse",markerWidth:s,markerHeight:f,viewBox:"0 0 "+s+" "+f,refX:s,refY:o,orient:"auto"}),d=void 0;switch(n){case"ARROW":d=e.createArrow(a,l,o);break;case"star":break;default:d=e.createArrow(a,l,o)}return u.default.appendToNode(d,y),u.default.appendToNode(y,c),c}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));var i={angle:{left:0,top:1.5707963267948966,right:3.141592653589793,bottom:4.71238898038469},getAngleDir:function(e){var t=Math.PI;return e>=t/4&&e<t/4*3?1:e>=t/4*3&&e<t/4*5?2:e>=t/4*5&&e<t/4*7?3:4},calcPathPointArr:function(e,t,n,r,u,o,a){switch(a){case"BEZIER":return i.calcBezier(e,t,n,r,u,o);case"STRAIGHT":return i.calcStraight(e,t,n,r,u,o);case"FLOW":return i.calcFlow(e,t,n,r,u,o);case"CURVE":return i.calcCurve(n,u,o);default:return i.calcBezier(e,t,n,r,u,o)}},calcBezier:function(e,t,n,r,i,u){var o=[],a=[],l=[],s=[],f=n.maxX-n.minX,c=n.maxY-n.minY,y=i,d=y.getRect(),h=u.getRect();return"right"===y.anchor||"bottom"===y.anchor||"top"===y.anchor?d.x<h.x?(o.push(0),a.push(200),l.push(f-200),s.push(f)):(o.push(f),a.push(f+200),l.push(-200),s.push(0)):d.x>h.x?(o.push(f),a.push(f-200),l.push(200),s.push(0)):(o.push(0),a.push(-200),l.push(f+200),s.push(f)),d.y===n.minY?(o.push(0),a.push(0),l.push(c-0),s.push(c)):(o.push(c),a.push(c-0),l.push(0),s.push(0)),[o,a,l,s]},calcStraight:function(e,t,n,r,i,u){var o=[],a=[],l=n.maxX-n.minX,s=n.maxY-n.minY,f=i.getRect();return f.x===n.minX?(o.push(0),a.push(l)):(o.push(l),a.push(0)),f.y===n.minY?(o.push(0),a.push(s)):(o.push(s),a.push(0)),[o,a]},calcFlow:function(e,t,n,u,o,a){var l=this.getStartingPoint(n,o,a),s=l.from,f=l.to,c=r.default.findSourceByAchor(plumb.sources,o),y=r.default.findSourceByAchor(plumb.sources,a),d=c.getRect(),h=y.getRect(),p={from:{id:"ANCHOR"===o.type?null:o.uuid,x:s[0],y:s[1],w:d.w,h:d.h,type:o.type,anchor:o.anchor},to:{id:"ANCHOR"===a.type?null:a.uuid,x:f[0],y:f[1],w:h.w,h:h.h,type:a.type,anchor:a.anchor}},x=i.getFlowPoints(p);x=x.map(function(e){return[e.x,e.y]});var v=[s];return(v=v.concat(x)).push(f),v},getStartingPoint:function(e,t,n){var r=[],i=[],u=e.maxX-e.minX,o=e.maxY-e.minY,a=n,l=t.getRect();a.getRect();return l.x===e.minX?(r.push(0),i.push(u)):(r.push(u),i.push(0)),l.y===e.minY?(r.push(0),i.push(o)):(r.push(o),i.push(0)),{from:r,to:i}},getLinkerMidpoint:function(e,t){var n={};if("CURVE"==t){var i=e[0],u=linker.points[1],o=linker.points[2],a=e[3];n={x:.125*i.x+.375*u.x+.375*o.x+.125*a.x,y:.125*i.y+.375*u.y+.375*o.y+.125*a.y}}else if("FLOW"===t){for(var l=e,s=0,f=1;f<l.length;f++){var c=l[f-1],y=l[f];s+=r.default.distanceLine({x:c[0],y:c[1]},{x:y[0],y:y[1]})}for(var d=s/2,h=0,p=1;p<l.length;p++){var x=l[p-1],v=l[p],b=r.default.distanceLine({x:x[0],y:x[1]},{x:v[0],y:v[1]}),g=h+b;if(g>=d){var m=(d-h)/b;n={x:(1-m)*x[0]+m*v[0],y:(1-m)*x[1]+m*v[1]};break}h=g}}return n},getFlowPoints:function(e){var t=[],n=Math.PI,r=e.from,u=e.to;r.angle="ANCHOR"===r.type?i.angle.bottom:i.angle[r.anchor],u.angle="ANCHOR"===u.type?i.angle.bottom:i.angle[u.anchor];var o=Math.abs(u.x-r.x),a=Math.abs(u.y-r.y),l=50;if(null!=r.id&&null!=u.id){var s=this.getAngleDir(r.angle),f=this.getAngleDir(u.angle),c=void 0,y=void 0,d=void 0;if(1==s&&1==f){r.y<u.y?(c=r,y=u,d=!1):(c=u,y=r,d=!0);var h=c;if(y.x>=h.x-l&&y.x<=h.x+h.from+l){y.x<h.x+h.from/2?h.x-l:h.x+h.from+l;var p=c.y-l;t.push({x:c.x,y:p}),p=y.y-l,t.push({x:y.x,y:p})}else{var x=c.y-l;t.push({x:c.x,y:x}),t.push({x:y.x,y:x})}}else if(3==s&&3==f){r.y>u.y?(c=r,y=u,d=!1):(c=u,y=r,d=!0);var v=c;if(y.x>=v.x-l&&y.x<=v.x+v.from+l){var b=c.y+l;y.x<v.x+v.from/2?v.x-l:v.x+v.from+l,t.push({x:c.x,y:b}),b=y.y+l,t.push({x:y.x,y:b})}else{var g=c.y+l;t.push({x:c.x,y:g}),t.push({x:y.x,y:g})}}else if(2==s&&2==f){r.x>u.x?(c=r,y=u,d=!1):(c=u,y=r,d=!0);var m=c;if(y.y>=m.y-l&&y.y<=m.y+m.h+l){var w=c.x+l;y.y<m.y+m.h/2?m.y-l:m.y+m.h+l,t.push({x:w,y:c.y}),w=y.x+l,t.push({x:w,y:y.y})}else{var _=c.x+l;t.push({x:_,y:c.y}),t.push({x:_,y:y.y})}}else if(4==s&&4==f){r.x<u.x?(c=r,y=u,d=!1):(c=u,y=r,d=!0);var k=c;if(y.y>=k.y-l&&y.y<=k.y+k.h+l){var E=c.x-l;y.y<k.y+k.h/2?k.y-l:k.y+k.h+l,t.push({x:E,y:c.y}),E=y.x-l,t.push({x:E,y:y.y})}else{var P=c.x-l;t.push({x:P,y:c.y}),t.push({x:P,y:y.y})}}else if(1==s&&3==f||3==s&&1==f){1==s?(c=r,y=u,d=!1):(c=u,y=r,d=!0);var O=c,T=y;if(y.y<=c.y){var S=c.y-a/2;t.push({x:c.x,y:S}),t.push({x:y.x,y:S})}else{var j=O.x+O.from,z=T.x+T.from,M=c.y-l,R=void 0;if(z>=O.x&&T.x<=j){var C=O.x+O.from/2;R=y.x<C?O.x<T.x?O.x-l:T.x-l:j>z?j+l:z+l,T.y<c.y&&(M=T.y-l)}else R=y.x<c.x?z+(O.x-z)/2:j+(T.x-j)/2;t.push({x:c.x,y:M}),t.push({x:R,y:M}),M=y.y+l,t.push({x:R,y:M}),t.push({x:y.x,y:M})}}else if(2==s&&4==f||4==s&&2==f){2==s?(c=r,y=u,d=!1):(c=u,y=r,d=!0);var D=c,L=y;if(y.x>c.x){var A=c.x+o/2;t.push({x:A,y:c.y}),t.push({x:A,y:y.y})}else{var N=D.y,I=L.y,Y=c.x+l,B=void 0;if(I>=D.y&&L.y<=N){var X=D.y+D.h/2;B=y.y<X?D.y<L.y?D.y-l:L.y-l:N>I?N+l:I+l,L.x+L.from>c.x&&(Y=L.x+L.from+l)}else B=y.y<c.y?I+(D.y-I)/2:N+(L.y-N)/2;t.push({x:Y,y:c.y}),t.push({x:Y,y:B}),Y=y.x-l,t.push({x:Y,y:B}),t.push({x:Y,y:y.y})}}else if(1==s&&2==f||2==s&&1==f){2==s?(c=r,y=u,d=!1):(c=u,y=r,d=!0);var H=c,G=y;if(y.x>c.x&&y.y>c.y)t.push({x:y.x,y:c.y});else if(y.x>c.x&&G.x>c.x){var V=void 0;V=G.x-c.x<100?c.x+(G.x-c.x)/2:c.x+l;var W=y.y-l;t.push({x:V,y:c.y}),t.push({x:V,y:W}),t.push({x:y.x,y:W})}else if(y.x<=c.x&&y.y>H.y+H.h){var U=H.y+H.h,F=c.x+l,$=void 0;$=y.y-U<100?U+(y.y-U)/2:y.y-l,t.push({x:F,y:c.y}),t.push({x:F,y:$}),t.push({x:y.x,y:$})}else{var q=void 0,Z=G.x+G.from;q=Z>c.x?Z+l:c.x+l;var J=void 0;J=y.y<H.y?y.y-l:H.y-l,t.push({x:q,y:c.y}),t.push({x:q,y:J}),t.push({x:y.x,y:J})}}else if(1==s&&4==f||4==s&&1==f){4==s?(c=r,y=u,d=!1):(c=u,y=r,d=!0);var K=c,Q=y,ee=Q.x+Q.from;if(y.x<c.x&&y.y>c.y)t.push({x:y.x,y:c.y});else if(y.x<c.x&&ee<c.x){var te=void 0;te=c.x-ee<100?ee+(c.x-ee)/2:c.x-l;var ne=y.y-l;t.push({x:te,y:c.y}),t.push({x:te,y:ne}),t.push({x:y.x,y:ne})}else if(y.x>=c.x&&y.y>K.y+K.h){var re=K.y+K.h,ie=c.x-l,ue=void 0;ue=y.y-re<100?re+(y.y-re)/2:y.y-l,t.push({x:ie,y:c.y}),t.push({x:ie,y:ue}),t.push({x:y.x,y:ue})}else{var oe=void 0;oe=Q.x<c.x?Q.x-l:c.x-l;var ae=void 0;ae=y.y<K.y?y.y-l:K.y-l,t.push({x:oe,y:c.y}),t.push({x:oe,y:ae}),t.push({x:y.x,y:ae})}}else if(2==s&&3==f||3==s&&2==f){2==s?(c=r,y=u,d=!1):(c=u,y=r,d=!0);var le=c,se=y;if(y.x>c.x&&y.y<c.y)t.push({x:y.x,y:c.y});else if(y.x>c.x&&se.x>c.x){var fe=void 0;fe=se.x-c.x<100?c.x+(se.x-c.x)/2:c.x+l;var ce=y.y+l;t.push({x:fe,y:c.y}),t.push({x:fe,y:ce}),t.push({x:y.x,y:ce})}else if(y.x<=c.x&&y.y<le.y){var ye=c.x+l,de=void 0;de=le.y-y.y<100?y.y+(le.y-y.y)/2:y.y+l,t.push({x:ye,y:c.y}),t.push({x:ye,y:de}),t.push({x:y.x,y:de})}else{var he=void 0,pe=se.x+se.from;he=pe>c.x?pe+l:c.x+l;var xe=void 0;xe=y.y>le.y+le.h?y.y+l:le.y+le.h+l,t.push({x:he,y:c.y}),t.push({x:he,y:xe}),t.push({x:y.x,y:xe})}}else if(3==s&&4==f||4==s&&3==f){4==s?(c=r,y=u,d=!1):(c=u,y=r,d=!0);var ve=c,be=y,ge=be.x+be.from;if(y.x<c.x&&y.y<c.y)t.push({x:y.x,y:c.y});else if(y.x<c.x&&ge<c.x){var me=void 0;me=c.x-ge<100?ge+(c.x-ge)/2:c.x-l;var we=y.y+l;t.push({x:me,y:c.y}),t.push({x:me,y:we}),t.push({x:y.x,y:we})}else if(y.x>=c.x&&y.y<ve.y){var _e=c.x-l,ke=void 0;ke=ve.y-y.y<100?y.y+(ve.y-y.y)/2:y.y+l,t.push({x:_e,y:c.y}),t.push({x:_e,y:ke}),t.push({x:y.x,y:ke})}else{var Ee=void 0;Ee=be.x<c.x?be.x-l:c.x-l;var Pe=void 0;Pe=y.y>ve.y+ve.h?y.y+l:ve.y+ve.h+l,t.push({x:Ee,y:c.y}),t.push({x:Ee,y:Pe}),t.push({x:y.x,y:Pe})}}d&&t.reverse()}else if(null!=r.id||null!=u.id){var Oe=void 0,Te=void 0,Se=void 0,je=void 0;null!=r.id?(Oe=r,Te=u,Se=!1,je=r.angle):(Oe=u,Te=r,Se=!0,je=u.angle);var ze=r;if(je>=n/4&&je<n/4*3)if(Te.y<Oe.y)if(o>=a)t.push({x:Oe.x,y:Te.y});else{var Me=a/2;t.push({x:Oe.x,y:Oe.y-Me}),t.push({x:Te.x,y:Oe.y-Me})}else if(t.push({x:Oe.x,y:Oe.y-l}),o>=a)if(Te.x>=ze.x-l&&Te.x<=ze.x+ze.from+l){var Re=ze.x+ze.from/2;Te.x<Re?(t.push({x:ze.x-l,y:Oe.y-l}),t.push({x:ze.x-l,y:Te.y})):(t.push({x:ze.x+ze.from+l,y:Oe.y-l}),t.push({x:ze.x+ze.from+l,y:Te.y}))}else Te.x<ze.x?(t.push({x:Te.x+l,y:Oe.y-l}),t.push({x:Te.x+l,y:Te.y})):(t.push({x:Te.x-l,y:Oe.y-l}),t.push({x:Te.x-l,y:Te.y}));else if(Te.x>=ze.x-l&&Te.x<=ze.x+ze.from+l){var Ce=ze.x+ze.from/2;Te.x<Ce?(t.push({x:ze.x-l,y:Oe.y-l}),t.push({x:ze.x-l,y:Te.y-l}),t.push({x:Te.x,y:Te.y-l})):(t.push({x:ze.x+ze.from+l,y:Oe.y-l}),t.push({x:ze.x+ze.from+l,y:Te.y-l}),t.push({x:Te.x,y:Te.y-l}))}else t.push({x:Te.x,y:Oe.y-l});else if(je>=n/4*3&&je<n/4*5)if(Te.x>Oe.x)if(o>=a){var De=o/2;t.push({x:Oe.x+De,y:Oe.y}),t.push({x:Oe.x+De,y:Te.y})}else t.push({x:Te.x,y:Oe.y});else if(t.push({x:Oe.x+l,y:Oe.y}),o>=a)if(Te.y>=ze.y-l&&Te.y<=ze.y+ze.h+l){var Le=ze.y+ze.h/2;Te.y<Le?(t.push({x:Oe.x+l,y:ze.y-l}),t.push({x:Te.x+l,y:ze.y-l}),t.push({x:Te.x+l,y:Te.y})):(t.push({x:Oe.x+l,y:ze.y+ze.h+l}),t.push({x:Te.x+l,y:ze.y+ze.h+l}),t.push({x:Te.x+l,y:Te.y}))}else t.push({x:Oe.x+l,y:Te.y});else if(Te.y>=ze.y-l&&Te.y<=ze.y+ze.h+l){var Ae=ze.y+ze.h/2;Te.y<Ae?(t.push({x:Oe.x+l,y:ze.y-l}),t.push({x:Te.x,y:ze.y-l})):(t.push({x:Oe.x+l,y:ze.y+ze.h+l}),t.push({x:Te.x,y:ze.y+ze.h+l}))}else Te.y<Oe.y?(t.push({x:Oe.x+l,y:Te.y+l}),t.push({x:Te.x,y:Te.y+l})):(t.push({x:Oe.x+l,y:Te.y-l}),t.push({x:Te.x,y:Te.y-l}));else if(je>=n/4*5&&je<n/4*7)if(Te.y>Oe.y)if(o>=a)t.push({x:Oe.x,y:Te.y});else{var Ne=a/2;t.push({x:Oe.x,y:Oe.y+Ne}),t.push({x:Te.x,y:Oe.y+Ne})}else if(t.push({x:Oe.x,y:Oe.y+l}),o>=a)if(Te.x>=ze.x-l&&Te.x<=ze.x+ze.from+l){var Ie=ze.x+ze.from/2;Te.x<Ie?(t.push({x:ze.x-l,y:Oe.y+l}),t.push({x:ze.x-l,y:Te.y})):(t.push({x:ze.x+ze.from+l,y:Oe.y+l}),t.push({x:ze.x+ze.from+l,y:Te.y}))}else Te.x<ze.x?(t.push({x:Te.x+l,y:Oe.y+l}),t.push({x:Te.x+l,y:Te.y})):(t.push({x:Te.x-l,y:Oe.y+l}),t.push({x:Te.x-l,y:Te.y}));else if(Te.x>=ze.x-l&&Te.x<=ze.x+ze.from+l){var Ye=ze.x+ze.from/2;Te.x<Ye?(t.push({x:ze.x-l,y:Oe.y+l}),t.push({x:ze.x-l,y:Te.y+l}),t.push({x:Te.x,y:Te.y+l})):(t.push({x:ze.x+ze.from+l,y:Oe.y+l}),t.push({x:ze.x+ze.from+l,y:Te.y+l}),t.push({x:Te.x,y:Te.y+l}))}else t.push({x:Te.x,y:Oe.y+l});else if(Te.x<Oe.x)if(o>=a){var Be=o/2;t.push({x:Oe.x-Be,y:Oe.y}),t.push({x:Oe.x-Be,y:Te.y})}else t.push({x:Te.x,y:Oe.y});else if(t.push({x:Oe.x-l,y:Oe.y}),o>=a)if(Te.y>=ze.y-l&&Te.y<=ze.y+ze.h+l){var Xe=ze.y+ze.h/2;Te.y<Xe?(t.push({x:Oe.x-l,y:ze.y-l}),t.push({x:Te.x-l,y:ze.y-l}),t.push({x:Te.x-l,y:Te.y})):(t.push({x:Oe.x-l,y:ze.y+ze.h+l}),t.push({x:Te.x-l,y:ze.y+ze.h+l}),t.push({x:Te.x-l,y:Te.y}))}else t.push({x:Oe.x-l,y:Te.y});else if(Te.y>=ze.y-l&&Te.y<=ze.y+ze.h+l){var He=ze.y+ze.h/2;Te.y<He?(t.push({x:Oe.x-l,y:ze.y-l}),t.push({x:Te.x,y:ze.y-l})):(t.push({x:Oe.x-l,y:ze.y+ze.h+l}),t.push({x:Te.x,y:ze.y+ze.h+l}))}else Te.y<Oe.y?(t.push({x:Oe.x-l,y:Te.y+l}),t.push({x:Te.x,y:Te.y+l})):(t.push({x:Oe.x-l,y:Te.y-l}),t.push({x:Te.x,y:Te.y-l}));Se&&t.reverse()}else if(o>=a){var Ge=(u.x-r.x)/2;t.push({x:r.x+Ge,y:r.y}),t.push({x:r.x+Ge,y:u.y})}else{var Ve=(u.y-r.y)/2;t.push({x:r.x,y:r.y+Ve}),t.push({x:u.x,y:r.y+Ve})}return t},calcCurve:function(e,t,n){var r=[],i=this.getStartingPoint(e,t,n),u={x:i.from[0],y:i.from[1]},o={x:i.to[1],y:i.to[1]},a=.4*this.measureDistance(u,o);function l(e,t){if(null!=e.id)return{x:e.x-a*Math.cos(e.angle),y:e.y-a*Math.sin(e.angle)};var n=Math.abs(e.y-t.y),r=Math.abs(e.x-t.x),i=Math.atan(n/r),u={};return e.x<=t.x?u.x=e.x+a*Math.cos(i):u.x=e.x-a*Math.cos(i),e.y<=t.y?u.y=e.y+a*Math.sin(i):u.y=e.y-a*Math.sin(i),u}return r.push(l(u,o)),r.push(l(o,u)),r}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(3)),i=u(n(0));u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var o={isDown:!1,dragEl:null,setDragEl:function(e){this.dragEl=e},dragStart:function(e,t){o.isDown=!0,o.dragEl&&(o.dragEl.originX=e.clientX,o.dragEl.originY=e.clientY)},dragging:function(e){if(o.isDown){if(o.dragEl){var t=o.dragEl,n=e.clientX-t.originX,u=e.clientY-t.originY;"END_POINT"!==t.type&&(t.rect.x+=n,t.rect.y+=u,t.originX=e.clientX,t.originY=e.clientY,r.default.updatePosition(t.element,t.rect.x,t.rect.y)),t.trigger("moved",{$X:n,$Y:u})}}else{var a=!1;plumb.draggableEls.SOURCE.forEach(function(t){a||(a=i.default.isInRect({x:e.clientX,y:e.clientY},t.getRect()))&&o.setDragEl(t)}),a||plumb.draggableEls.ENDPOINT.forEach(function(t){a||(a=i.default.isInCircle({x:e.clientX,y:e.clientY},t.getRect()))&&o.setDragEl(t)}),!a&&o.setDragEl(null)}},dragEnd:function(e){o.isDown=!1,o.dragEl&&o.dragEl.trigger("moveend",o.dragEl.type)}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=f(n(10)),u=f(n(0)),o=f(n(1)),a=f(n(4)),l=f(n(3)),s=f(n(2));function f(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u.lineType=r,u.lineDashType=i,u.sourceEndPoint=e,u.targetEndPoint=n,u.uuid=e.uuid+"^-^"+n.uuid,u.markerId="marker-achor-"+plumb.flag++,u.showText=!1,u.on("update",u.update.bind(u)),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),r(t,[{key:"getSource",value:function(){return this.sourceEndPoint}},{key:"getTarget",value:function(){return this.targetEndPoint}},{key:"getBound",value:function(){var e=this.getSource().getRect(),t=this.getTarget().getRect();return u.default.getBoundByRect(e,t)}},{key:"getPointSize",value:function(){return this.getSource().getRect().w||0}},{key:"getSizeAndBound",value:function(){var e=this.getBound();return{size:this.getPointSize(),width:u.default.distance(e.minX,e.maxX),height:u.default.distance(e.minY,e.maxY),bound:e}}},{key:"update",value:function(e){var t=e||this.getSizeAndBound(),n=t.width,r=t.height,i=t.bound,u=t.size;if(this.data=a.default.calcPathPointArr(n,r,i,u,this.getSource(),this.getTarget(),this.lineType),l.default.updateConnector(this,n,r,i,u,this.data,this.lineType,this.lineDashType),e&&e.isCreate){var s=o.default.find("tag","path",this.element);this.bind(s,"click",this.onclick.bind(this)()),this.bind(s,"mouseover",this.onmouseover.bind(this)),this.bind(s,"mouseout",this.onmouseout.bind(this))}if("FLOW"===this.lineType&&this.showText){var f=o.default.find("class","text-linker",this.element);this.updateText(f,this.data)}}},{key:"updateText",value:function(e,t){var n=u.default.getElementRectInfo(e),r=a.default.getLinkerMidpoint(t.slice(),this.lineType);o.default.setStyle(e,{left:r.x-n.w/2+"px",top:r.y-n.h/2+"px",transform:"translate(0, 0)"})}},{key:"onclick",value:function(e){var t=this,n=!1,r=!1,i=!1;return function(){i&&(n=!1,r=!1,i=!1),r?(n=!0,t.onDoubleClick(),i=!0):(r=!0,setTimeout(function(){n||(t.onSingleClick(),r=!1)},300))}}},{key:"onSingleClick",value:function(){if(window.confirm("是否删除连接线?")){var e=this.uuid;delete plumb.connectors[e],o.default.delete(this.element),this.uuid.split("^-^").forEach(function(e){var t=u.default.findItemByUUID(plumb.endPoints,e),n=o.default.find("tag","circle",t.element);o.default.setAttributes(n,{fill:"gray"})})}}},{key:"onDoubleClick",value:function(){var e=this,t=this.getSizeAndBound(),n=(t.width,t.height,t.bound,t.size,o.default.find("class","text-linker",e.element));if(!e.textarea){var r=new i.default(n.innerHTML);r.on("text-blur",function(){var t=r.element.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>").trim();n.innerHTML=t,e.showText=""!==t,"FLOW"===e.lineType?e.showText&&setTimeout(function(){o.default.setStyle(n,{display:e.showText?"block":"none"}),e.updateText(n,e.data)}):o.default.setStyle(n,{display:e.showText?"block":"none"}),r.off("text-blur"),r.unbind(r.element,"blur"),o.default.delete(r.element,e.element)},r),o.default.appendToNode(r.element,e.element),o.default.setStyle(n,{display:"none"}),r.element.focus(),"FLOW"===this.lineType&&this.updateText(r.element,this.data)}}},{key:"onmouseover",value:function(e){var t=o.default.find("tag","path",this.element,!0);o.default.setAttributes(t[0],{stroke:"orange","stroke-width":plumb.config.strokeWidth+2}),o.default.setAttributes(t[1],{fill:"orange"}),this.uuid.split("^-^").forEach(function(e){var t=u.default.findItemByUUID(plumb.endPoints,e),n=o.default.find("tag","circle",t.element);o.default.setAttributes(n,{fill:"orange"})})}},{key:"onmouseout",value:function(e){var t=o.default.find("tag","path",this.element,!0);o.default.setAttributes(t[0],{stroke:"gray","stroke-width":plumb.config.strokeWidth}),o.default.setAttributes(t[1],{fill:"gray"}),this.uuid.split("^-^").forEach(function(e){var t=u.default.findItemByUUID(plumb.endPoints,e),n=o.default.find("tag","circle",t.element);o.default.setAttributes(n,{fill:"gray"})})}}]),t}();t.default=c},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}}(n(8));window.Plumb=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=x(n(9)),u=x(n(11)),o=x(n(12)),a=x(n(6)),l=x(n(13)),s=x(n(14)),f=x(n(5)),c=(x(n(0)),x(n(4)),x(n(3))),y=x(n(1)),d=x(n(15)),h=x(n(2)),p=x(n(16));function x(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.flag=1,r.config=Object.assign({},p.default.default,n),r.sources=[],r.endPoints=[],r.connectors=[],r.draggableEls={SOURCE:[],ENDPOINT:[]},r.tolerant=2,r.guidLineH=null,r.guidLineV=null,r.wrapper=y.default.find("class","jtk-demo-main"),r.wrapper?(r.init(e),r.initEvents(),r.initResizeEvent(),r.config.useGuideLine&&r.initGuideLine(),r.config.useGrid&&r.initGrid(),r):(console.log(""),v(r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,h.default),r(t,[{key:"init",value:function(e){e&&(void 0===e.length&&(e=[e]),Array.prototype.slice.call(e).forEach(function(e){var t=new u.default(e);this.draggable(t,"SOURCE"),this.sources.push(t)},this))}},{key:"initEvents",value:function(){this.bind(document,"mousedown",f.default.dragStart),this.bind(document,"mousemove",f.default.dragging),this.bind(document,"mouseup",f.default.dragEnd)}},{key:"initResizeEvent",value:function(){d.default.on(this.wrapper,this.handleResize.bind(this))}},{key:"initGuideLine",value:function(){this.guidLineH=new l.default("horizontal"),this.guidLineV=new l.default("vertical"),y.default.appendToNode(this.guidLineH.element,this.wrapper),y.default.appendToNode(this.guidLineV.element,this.wrapper)}},{key:"initGrid",value:function(){this.grid=new s.default(this.config.padding),y.default.insertBefore(this.grid.element,this.wrapper.firstChild)}},{key:"handleResize",value:function(){this.grid.trigger("resize")}},{key:"draggable",value:function(e,t){this.draggableEls[t].push(e)}},{key:"unDraggable",value:function(e,t){e.off("moved"),e.off("moveend");for(var n=this.draggableEls[t],r=0;r<n.length;r++)if(n[r].uuid===e.uuid&&n[r].type===e.type){n.splice(r,1);break}}},{key:"addEndPoint",value:function(e,t){var n=0,r=0,i=e.getRect();switch(t.anchor){case"top":n=i.x+i.w/2-t.size/2,r=i.y-t.size/2;break;case"bottom":n=i.x+i.w/2-t.size/2,r=i.y+i.h-t.size/2;break;case"left":n=i.x-t.size/2,r=i.y+i.h/2-t.size/2;break;case"right":n=i.x+i.w-t.size/2,r=i.y+i.h/2-t.size/2;break;default:n=i.x+i.w/2-t.size/2,r=i.y+i.h-t.size/2}var u=new o.default(t,n,r,t.lineType||plumb.config.lineType,t.lineDashType||plumb.config.lineDashType);u.element=c.default.assembleEndPoint(u),y.default.appendToNode(u.element,y.default.find("class","jtk-demo-canvas")),this.bind(u.element,"mouseover",u.onmouseover.bind(u)),this.bind(u.element,"mouseout",u.onmouseout.bind(u)),e.addEndPoint(u),this.endPoints.push(u),this.draggable(u,"ENDPOINT")}},{key:"createFloatingEndPoint",value:function(e,t,n,r){var u=new i.default(e,t,n,r);return u.isMouseDown=!0,u}},{key:"addConnector",value:function(e,t){var n=!1;t=t||e.uuid;var r=!0,i=!1,u=void 0;try{for(var o,l=plumb.sources[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var s=o.value,f=!0,d=!1,h=void 0;try{for(var p,x=s.endPoints[Symbol.iterator]();!(f=(p=x.next()).done);f=!0){var v=p.value;if(v.uuid===t){var b=v.uuid+"^-^"+e.uuid;if(!plumb.connectors[b]){var g=new a.default(v,e,v.lineType,v.lineDashType);plumb.connectors[b]=g;var m=g.getSizeAndBound(),w=m.width,_=m.height,k=m.bound,E=m.size;return g.element=c.default.assembleConnector(w,_,k,E,plumb.config.strokeWidth),y.default.appendToNode(g.element,y.default.find("class","jtk-demo-canvas")),g.trigger("update",{width:w,height:_,bound:k,size:E,isCreate:!0}),g}n=!0;break}}}catch(e){d=!0,h=e}finally{try{!f&&x.return&&x.return()}finally{if(d)throw h}}if(n)break}}catch(e){i=!0,u=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw u}}return!1}},{key:"deleteConnector",value:function(e,t){var n=e.uuid,r=t&&t.uuid||n;for(var i in plumb.connectors){var u=plumb.connectors[i],o=u.uuid.split("^-^");o[0]===n&&o[1]===r&&(c.default.deleteConnector(u),delete plumb.connectors[i])}}},{key:"updateConnector",value:function(e){for(var t in plumb.connectors){var n=plumb.connectors[t];e!==n.getSource().uuid&&e!==n.getTarget().uuid||n.trigger("update")}}},{key:"addMarker",value:function(e,t,n,r){var i=plumb.connectors[e],u=y.default.find("tag","svg",i.element),o=c.default.assembleMarker(t,n,r);y.default.appendToNode(o,u);var a=y.default.find("tag","path",u);y.default.setAttribute(a,"marker-end","url(#"+r+")")}},{key:"showGuide",value:function(e){var t=this,n=e.length;if(2===n)t.guidLineH.show(e[0].x+"px",e[0].y+"px"),t.guidLineV.show(e[1].x+"px",e[1].y+"px");else if(1===n){var r=e[0];"horizontal"===r.type?(t.guidLineH.show(r.x+"px",r.y+"px"),t.guidLineV.hide()):(t.guidLineV.show(r.x+"px",r.y+"px"),t.guidLineH.hide())}else 0===n&&t.hideGuide()}},{key:"hideGuide",value:function(){this.guidLineH.hide(),this.guidLineV.hide()}},{key:"getSources",value:function(){return this.sources}}]),t}();t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(0)),u=a(n(3)),o=a(n(2));a(n(6));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,n,r,i,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.type="ANCHOR",o.rect=e,o.uuid=n,o.originX=r,o.originY=i,o.on("moved",o.moved,o),o.on("moveend",o.moveend,o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"getRect",value:function(){return this.rect}},{key:"moved",value:function(e){var t=plumb.addConnector(this);t.uuid&&plumb.config.marker&&plumb.addMarker(t.uuid,Object.assign({},this.rect),plumb.config.marker,t.markerId),plumb.updateConnector(this.uuid)}},{key:"moveend",value:function(){if(plumb.floatingEndPoint){plumb.unDraggable(plumb.floatingEndPoint,"ENDPOINT"),u.default.deleteAnchor(plumb.floatingEndPoint),plumb.deleteConnector(plumb.floatingEndPoint,null);var e=plumb.floatingEndPoint.getRect(),t=!0,n=!1,r=void 0;try{for(var o,a=plumb.sources[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=!0,f=!1,c=void 0;try{for(var y,d=l.endPoints[Symbol.iterator]();!(s=(y=d.next()).done);s=!0){var h=y.value,p=h.getRect();if(i.default.isCircleIntersect({x:p.x,y:p.y,r:p.w/2},{x:e.x,y:e.y,r:e.w/2})){plumb.deleteConnector(h,plumb.floatingEndPoint);var x=plumb.addConnector(h,plumb.floatingEndPoint.uuid);x.uuid&&plumb.config.marker&&plumb.addMarker(x.uuid,Object.assign({},this.rect),plumb.config.marker,x.markerId),plumb.trigger("connected",{sourceID:plumb.floatingEndPoint.uuid,targetID:h.uuid})}}}catch(e){f=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(f)throw c}}}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}delete plumb.floatingEndPoint}}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(1)),u=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.value=e,n.element=n.create(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),r(t,[{key:"onblur",value:function(){this.trigger("text-blur")}},{key:"create",value:function(){var e=i.default.createElement("textarea",{},"text-linker text-linker-textarea",{wrap:"off",autofocus:!0});return e.value=this.value,this.bind(e,"blur",this.onblur.bind(this)),e}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(n(0)),u=l(n(3)),o=l(n(2)),a=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.type,n.endPoints=[],n.element=e,n.uuid=n.element.id,n.prev=null,n.next=null,n.originX=n.originY=0,n.isMouseDown=!1,n.rect=i.default.getElementRectInfo(e),n.on("moved",n.moved,n),n.on("moveend",n.moveend,n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"getRect",value:function(){return this.rect}},{key:"getElement",value:function(){return this.element}},{key:"addEndPoint",value:function(e){this.endPoints.push(e)}},{key:"moved",value:function(e){this.endPoints.forEach(function(t){t.updatePosition(e.$X,e.$Y),u.default.updatePosition(t.element,t.rect.x,t.rect.y)}),plumb.config.useGuideLine&&a.default.dragEl&&this.calGuideLine()}},{key:"calGuideLine",value:function(){var e=this,t=[],n={t:{abs:9999},tm:{abs:9999},b:{abs:9999}},r={l:{abs:9999},lm:{abs:9999},r:{abs:9999}},u=e.getRect(),o=plumb.tolerant;plumb.sources.forEach(function(t){if(t.uuid!==e.uuid){var i=t.getRect(),a=i.y,l=i.y+i.h/2,s=i.y+i.h,f=e.getMinDistance(u.y,a,l,s),c=e.getMinDistance(u.y+u.h/2,a,l,s),y=e.getMinDistance(u.y+u.h,a,l,s);f.abs<=o&&f.abs<n.t.abs&&(n.t=f),c.abs<=o&&c.abs<n.tm.abs&&(n.tm=c),y.abs<=o&&y.abs<n.b.abs&&(n.b=y);var d=i.x,h=i.x+i.w/2,p=i.x+i.w,x=e.getMinDistance(u.x,d,h,p),v=e.getMinDistance(u.x+u.w/2,d,h,p),b=e.getMinDistance(u.x+u.w,d,h,p);x.abs<=o&&x.abs<r.l.abs&&(r.l=x),v.abs<=o&&v.abs<r.lm.abs&&(r.lm=v),b.abs<=o&&b.abs<r.r.abs&&(r.r=b)}});var a=i.default.min(n.t.abs,n.tm.abs,n.b.abs);if(a<=o){var l=0;l=a===n.t.abs?n.t.p:a===n.tm.abs?n.tm.p:n.b.p,t.push({type:"horizontal",x:0,y:parseInt(l)})}var s=i.default.min(r.l.abs,r.lm.abs,r.r.abs);if(s<=o){var f=0;f=s===r.l.abs?r.l.p:s===r.lm.abs?r.lm.p:r.r.p,t.push({type:"vertical",x:parseInt(f),y:0})}plumb.showGuide(t)}},{key:"getMinDistance",value:function(e,t,n,r){var u=e-t,o=e-n,a=e-r,l=Math.abs(u),s=Math.abs(o),f=Math.abs(a),c=i.default.min(l,s,f);return c===l?{dis:u,abs:l,p:t}:c===s?{dis:o,abs:s,p:n}:{dis:a,abs:f,p:r}}},{key:"moveend",value:function(){plumb.hideGuide()}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(l(n(0)),l(n(5))),u=l(n(3)),o=l(n(1)),a=l(n(2));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,n,r,i,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.type="END_POINT",o.uuid=e.uuid,o.anchor=e.anchor,o.originX=o.originY=0,o.rect={x:n,y:r,w:e.size,h:e.size},o.lineType=i,o.lineDashType=u,o.isMouseDown=!1,o.on("moved",o.moved,o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"getRect",value:function(){return this.rect}},{key:"updatePosition",value:function(e,t){this.rect.x+=e,this.rect.y+=t,plumb.updateConnector(this.uuid)}},{key:"moved",value:function(e){plumb.floatingEndPoint||(plumb.floatingEndPoint=plumb.createFloatingEndPoint(Object.assign({},this.rect),this.uuid,this.originX,this.originY),plumb.floatingEndPoint.element=u.default.assembleAnchor(plumb.floatingEndPoint),o.default.appendToNode(plumb.floatingEndPoint.element,document.querySelector(".jtk-demo-canvas")),plumb.draggable(plumb.floatingEndPoint,"ENDPOINT"),i.default.setDragEl(plumb.floatingEndPoint))}},{key:"onmouseover",value:function(e){var t=o.default.find("tag","circle",this.element);o.default.setAttributes(t,{fill:"orange"})}},{key:"onmouseout",value:function(e){var t=o.default.find("tag","circle",this.element);o.default.setAttributes(t,{fill:"gray"})}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(1)),u=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.type=e,n.rect={x:0,y:0},n.element=n.create(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),r(t,[{key:"create",value:function(){return i.default.createElement("div",Object.assign({},{position:"absolute",left:"0",top:"0",width:"100%",height:"1px",margin:"0",padding:"0",background:"rgb(110, 177, 234)","pointer-events":"none",zIndex:"100",transform:"translate(0, 0)",visibility:"hidden"},"horizontal"===this.type?{width:"100%",height:"1px"}:{width:"1px",height:"100%"}),"guide-line-"+this.type,{id:"guide-line-"+this.type})}},{key:"show",value:function(e,t){i.default.setStyle(this.element,{visibility:"visible",transform:"translate("+e+", "+t+")"})}},{key:"hide",value:function(){i.default.setStyle(this.element,{visibility:"hidden",transform:"translate(0, 0)"})}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(2)),u=a(n(0)),o=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.id="design_grid",n.gridSize=15,n.padding=e,n.element=n.create(),n.on("resize",n.resize.bind(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"create",value:function(){var e=o.default.createElement("canvas",{position:"absolute",left:"0",top:"0"},"",{id:this.id});return this.paint(e,this.padding,this.gridSize),e}},{key:"paint",value:function(e,t,n){var r=o.default.find("class","jtk-demo-main"),i=u.default.getElementRectInfo(r),a={x:t,y:t,w:i.w-2*t,h:i.h-2*t};e.width=i.w,e.height=i.h;var l=e.getContext("2d");l.clearRect(0,0,i.w,i.h),l.fillStyle="rgb(255, 255, 255)",l.beginPath(),l.rect(a.x,a.y,a.w,a.h),l.fill(),l.translate(t,t),l.lineWidth=1,l.save();for(var s=.5,f=0;s<=a.h;)l.restore(),l.strokeStyle=f%4==0?"rgb(229, 229, 229)":"rgb(242, 242, 242)",l.beginPath(),l.moveTo(0,s),l.lineTo(a.w,s),s+=n,f++,l.stroke();for(s=.5,f=0;s<=a.w;)l.restore(),l.strokeStyle=f%4==0?"rgb(229, 229, 229)":"rgb(242, 242, 242)",l.beginPath(),l.moveTo(s,0),l.lineTo(s,a.h),s+=n,f++,l.stroke()}},{key:"resize",value:function(){this.paint(this.element,this.padding,this.gridSize)}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={_handleResize:function(e){var t=(e.target||e.srcElement).__resizeTrigger__;if(t){var n=t.__z_resizeListeners;if(n)for(var r=n.length,i=0;i<r;i++){var u=n[i],o=u.handler,a=u.context;o.apply(a,[e])}}},_removeHandler:function(e,t,n){var r=e.__z_resizeListeners;if(r)for(var i=r.length,u=0;u<i;u++){var o=r[u];if(o.handler===t&&o.context===n)return void r.splice(u,1)}},_createResizeTrigger:function(e){var t=document.createElement("object");return t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden;opacity: 0; pointer-events: none; z-index: -1;"),t.onload=r._handleObjectLoad,t.type="text/html",e.appendChild(t),t.data="about:blank",t},_handleObjectLoad:function(e){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",r._handleResize)}};document.attachEvent?(r.on=function(e,t,n){var i=e.__z_resizeListeners;i||(i=[],e.__z_resizeListeners=i,e.__resizeTrigger__=e,e.attachEvent("onresize",r._handleResize)),i.push({handler:t,context:n})},r.off=function(e,t,n){var i=e.__z_resizeListeners;i&&(r._removeHandler(e,t,n),0===i.length&&(e.detachEvent("onresize",r._handleResize),delete e.__z_resizeListeners))}):(r.on=function(e,t,n){var i=e.__z_resizeListeners;if(!i){i=[],e.__z_resizeListeners=i,"static"===getComputedStyle(e,null).position&&(e.style.position="relative");var u=r._createResizeTrigger(e);e.__resizeTrigger__=u,u.__resizeElement__=e}i.push({handler:t,context:n})},r.off=function(e,t,n){var i=e.__z_resizeListeners;if(i&&(r._removeHandler(e,t,n),0===i.length)){var u=e.__resizeTrigger__;u&&(u.contentDocument.defaultView.removeEventListener("resize",r._handleResize),e.removeChild(u),delete e.__resizeTrigger__),delete e.__z_resizeListeners}}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={default:{marker:"ARROW",lineDashType:"SOLID",lineType:"BEZIER",strokeWidth:2,padding:20,useGuideLine:!1,useGrid:!1}}}]);